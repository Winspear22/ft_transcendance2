FROM postgres:14.2

RUN echo "\033[1;36m============================================\033[0m" && \
    echo "\033[1;31m---------Installation de PostgreSQL---------\033[0m" && \
    echo "\033[1;36m============================================\033[0m" && \
    echo "\033[1;36m============================================\033[0m" && \
    echo "\033[1;31m------------Gestion des var d'env-----------\033[0m" && \
    echo "\033[1;36m============================================\033[0m"

ENV POSTGRES_USER=${POSTGRES_USER}
ENV POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
ENV POSTGRES_DB=${POSTGRES_DB}


RUN echo "\033[1;36m============================================\033[0m" && \
    echo "\033[1;31m-------------Expose du port 5432------------\033[0m" && \
    echo "\033[1;36m============================================\033[0m"

EXPOSE 5432

RUN echo "\033[1;36m============================================\033[0m" && \
    echo "\033[1;31m-----------Lancement de PostgreSQL----------\033[0m" && \
    echo "\033[1;36m============================================\033[0m"

CMD ["postgres", "-c", "config_file=/var/lib/postgresql/data/postgresql.conf"]

RUN echo "\033[1;36m============================================\033[0m" && \
    echo "\033[1;31m---------Fin du Dockerfile postgreSQL-------\033[0m" && \
    echo "\033[1;36m============================================\033[0m"
