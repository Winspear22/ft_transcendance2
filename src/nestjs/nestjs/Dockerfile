FROM node:lts

RUN echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m------------Installation de NODE------------\033[0m" && \
    echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m---------Entr√©e dans le dossier app---------\033[0m" && \
    echo "\033[1;32m============================================\033[0m"

WORKDIR /app

RUN echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m---------Copie de tous les packages---------\033[0m" && \
    echo "\033[1;32m============================================\033[0m"

COPY package*.json ./

RUN echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m------Installation de tous les packages-----\033[0m" && \
    echo "\033[1;32m============================================\033[0m" && \
    npm install

RUN echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m----------Copie de tout le dossier----------\033[0m" && \
    echo "\033[1;32m============================================\033[0m"

COPY . .

RUN echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m-------------Expose du port 3000------------\033[0m" && \
    echo "\033[1;32m============================================\033[0m"

EXPOSE 3000

RUN echo "\033[1;32m============================================\033[0m" && \
    echo "\033[1;37m-------Lancement de NPM avec start:dev------\033[0m" && \
	echo "\033[1;32m============================================\033[0m"

CMD ["npm", "run", "start:dev"]
